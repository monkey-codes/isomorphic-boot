/*
 * This build file was auto generated by running the Gradle 'init' task
 * by 'jzietsman' at '4/17/16 10:09 AM' with Gradle 2.10
 *
 * This generated file contains a sample Groovy project to get you started.
 * For more details take a look at the Groovy Quickstart chapter in the Gradle
 * user guide available at https://docs.gradle.org/2.10/userguide/tutorial_groovy_projects.html
 */

// Apply the groovy plugin to add support for Groovy
//apply plugin: 'groovy'

//sourceCompatibility = 1.8
//targetCompatibility = 1.8

/*
*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
* open -a "IntelliJ IDEA 15" to fix path
* !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
* */
buildscript {
    ext {
        springBootVersion = '1.3.3.RELEASE'
    }
    repositories {
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }
    dependencies {
        classpath "com.moowork.gradle:gradle-node-plugin:0.12"
        classpath "org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}"
    }
}


configure(allprojects) { project ->
    group = 'codes.monkey.isomorphicboot'

    ext.springVersion = '4.2.5.RELEASE'
    ext.spockVersion = '1.0-groovy-2.4'
}


allprojects {
    apply plugin: 'maven'
    repositories {
        // Use 'jcenter' for resolving your dependencies.
        // You can declare any Maven/Ivy/file repository here.
        mavenLocal()
        jcenter()
        mavenCentral()

    }

}

// In this section you declare where to find the dependencies of your project
//repositories {
//    // Use 'jcenter' for resolving your dependencies.
//    // You can declare any Maven/Ivy/file repository here.
//    jcenter()
//    mavenCentral()
//}

project('isomorphic-boot-app') {
    apply plugin: 'groovy'
    apply plugin: 'spring-boot'

//    jar {
//        baseName = 'isomorphic-boot-app'
//        version = '0.0.1-SNAPSHOT'
//    }
    sourceCompatibility = 1.8
    targetCompatibility = 1.8


    dependencies {
        // We use the latest groovy 2.x version for building this library
        compile 'org.codehaus.groovy:groovy-all:2.4.5'
        compile("org.springframework:spring-core:$springVersion")
        compile("org.springframework:spring-beans:$springVersion")
        compile("org.springframework:spring-context:$springVersion")
        compile('org.springframework.boot:spring-boot-starter-web')
//        compile project(':isomorphic-boot-ui')
        compile ('codes.monkey.isomorphicboot:isomorphic-boot-ui:0.1-SNAPSHOT')
        testCompile "org.spockframework:spock-core:$spockVersion"
        testCompile "org.spockframework:spock-spring:$spockVersion"
        testCompile 'junit:junit:4.12'
        testCompile "org.springframework:spring-test:$springVersion"
        testCompile('org.springframework.boot:spring-boot-starter-test')

        // We use the awesome Spock testing and specification framework
//        testCompile 'org.spockframework:spock-core:1.0-groovy-2.4'
//        testCompile 'junit:junit:4.12'
    }
}

project('isomorphic-boot-ui') { project ->
//    buildscript {
//        repositories {
//            maven {
//                url "https://plugins.gradle.org/m2/"
//            }
//        }
//
//        dependencies {
//            classpath "com.moowork.gradle:gradle-node-plugin:0.12"
//        }
//    }

    apply plugin: 'groovy'
    apply plugin: 'com.moowork.node'


    task copyUI(type: Copy) {
        from 'dist'
//        into 'build/ui/public/isomorphic-boot-ui'
        into 'build/ui/public'
    }

    processResources.dependsOn npm_run_dist
    assemble.dependsOn copyUI


    sourceSets {
        main {
            resources {
                srcDir 'build/ui'
            }
        }
    }
}

//// In this section you declare the dependencies for your production and test code
//dependencies {
//    // We use the latest groovy 2.x version for building this library
//    compile 'org.codehaus.groovy:groovy-all:2.4.5'
//
//    // We use the awesome Spock testing and specification framework
//    testCompile 'org.spockframework:spock-core:1.0-groovy-2.4'
//    testCompile 'junit:junit:4.12'
//}
